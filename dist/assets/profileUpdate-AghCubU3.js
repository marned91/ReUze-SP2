import{a as p}from"./authGuard-DA79hxSV.js";import{a as g,u as h}from"./profile-DJ92duJc.js";import{h as d}from"./main-Cbclldai.js";import{s as y,h as I}from"./skeletonLoader-U1K08Fq0.js";import"./doFetch-DiDBEFLs.js";p();async function v(){const r=JSON.parse(localStorage.getItem("user"))?.name,n=document.getElementById("profile-edit-container");n.classList.add("hidden");const c=document.getElementById("profile-image"),l=document.getElementById("bio"),i=document.getElementById("image-url");try{y();const e=await g(r);if(l.value=e?.bio||"No BIO added yet",e?.avatar?.url){const t=document.createElement("img");t.src=e.avatar.url,t.alt=e.avatar.alt||"Profile Image",t.classList.add("w-full","max-h-[500px]","object-cover"),c.appendChild(t),i.value=e.avatar.url}n.classList.remove("hidden");const a=document.getElementById("profile-edit-form");a.addEventListener("submit",async t=>{t.preventDefault();const u={bio:l.value,avatar:{url:i.value,alt:"Profile Image"}},m=a.querySelector("fieldset"),f=a.querySelector("button");m.disabled=!0,f.textContent="Updating Profile...";try{await h(r,u),d("Profile updated successfully!","success"),setTimeout(()=>window.location.pathname="/profile/",2e3)}catch{d("Failed to update profile. Please try again","error")}})}catch(e){console.error("Error fetching current profile data:",e)}finally{I(),fieldset.disabled=!1,button.textContent=originalButtonText}}const s=document.getElementById("bio"),b=document.getElementById("char-count");s.addEventListener("input",()=>{const o=s.value.length;b.textContent=`${o} / 160`});v();
//# sourceMappingURL=profileUpdate-AghCubU3.js.map
