import{a as S}from"./authGuard-DA79hxSV.js";import{f as j,a as T}from"./profile-DJ92duJc.js";import{d as $}from"./listings-gFXpV0t2.js";import{h as V}from"./main-Cbclldai.js";import{s as G,h as H}from"./skeletonLoader-U1K08Fq0.js";import"./doFetch-DiDBEFLs.js";async function P(a,E){a.preventDefault();const t=document.getElementById("delete-modal");t.classList.remove("hidden");const s=document.getElementById("cancel-btn"),c=document.getElementById("confirm-btn");s.addEventListener("click",()=>{t.classList.add("hidden")}),c.addEventListener("click",async()=>{try{await $(E)}finally{t.classList.add("hidden")}})}const F=document.createElement("i");F.classList.add("fa-solid","fa-trash","text-brand-dark","cursor-pointer","hover:text-red-700","text-lg");F.id="delete-listing-icon";F.addEventListener("click",a=>{P(a,id)});async function O(a){const E=document.getElementById("profile-listings"),t=document.createElement("a");t.href="/listings/create/",t.classList.add("p-6","flex","flex-col","items-center","justify-center","cursor-pointer","transition","duration-300","ease-out","hover:scale-105","shadow-2xl","bg-white","rounded-lg","h-full");const s=document.createElement("div");s.textContent="+",s.classList.add("text-6xl","text-brand-dark");const c=document.createElement("p");c.textContent="New Listing",c.classList.add("mt-2","text-lg"),t.append(s,c),E.appendChild(t),(await j(a)).forEach(({id:C,title:b,description:w,media:y,endsAt:r,_count:v,bids:m})=>{const e=document.createElement("div");e.href=`/listings/${C}`,e.classList.add("p-4","shadow-md","rounded-lg","bg-white","flex","flex-col","h-full");const n=document.createElement("img");n.src=y?.[0]?.url||"/assets/default-image.jpg",n.alt=y?.[0]?.alt||"Listing image",n.classList.add("w-full","h-48","object-cover","rounded-t-lg");const d=document.createElement("div");d.classList.add("flex","flex-col","h-full");const o=document.createElement("h3");o.textContent=b,o.classList.add("text-lg","font-semibold","mt-2");const l=document.createElement("p");l.textContent=w||"No description added",l.classList.add("text-sm","text-gray-600","mt-2","italic");const p=document.createElement("p"),u=document.createElement("span");u.textContent="Deadline: ",u.classList.add("font-bold");const i=document.createElement("span");i.textContent=new Date(r).toLocaleDateString(),i.classList.add("font-normal"),p.classList.add("text-sm","text-gray-600","mt-3"),p.append(u,i);const f=document.createElement("p"),g=document.createElement("span");g.textContent="Number of bids: ",g.classList.add("font-bold");const x=document.createElement("span");x.textContent=v?.bids||0,x.classList.add("font-normal"),f.classList.add("text-sm","text-gray-600","mt-1"),f.append(g,x);const L=document.createElement("p"),h=document.createElement("span");h.textContent="Current Bid:",h.classList.add("font-bold");const B=document.createElement("span");B.textContent=v?.bids>0?`$${m[m.length-1].amount}`:"$0",B.classList.add("font-normal"),L.classList.add("text-sm","text-gray-600","mt-1"),L.append(h,B);const I=document.createElement("i");I.classList.add("fa-solid","fa-trash","text-brand-dark","cursor-pointer","hover:text-red-700","text-lg"),I.id="delete-listing-icon",I.addEventListener("click",N=>{P(N,C)});const D=document.createElement("div");D.classList.add("flex","justify-end","mt-auto"),D.appendChild(I),d.append(o,l,p,f,L),e.append(n,d,D),E.appendChild(e)})}S();async function R(){const a=document.getElementById("profile-container");a.classList.add("hidden"),G();const t=JSON.parse(localStorage.getItem("user"))?.name,s=await T(t);if(!s){V("Profile data not found. Please try again","error");return}const{name:c,bio:k="No bio added yet",credits:C,avatar:b,_count:w}=s,y=w?.listings??0,r=document.getElementById("profile-info"),v=document.getElementById("profile-image"),m=document.createElement("img");m.src=b?.url||"/assets/default-profile-image.jpg",m.alt=b?.alt||"Default ReUze avatar image",m.classList.add("w-full","max-h-[500px]","object-cover"),v.appendChild(m);const e=document.createElement("h1");e.id="profile-name",e.classList.add("font-largeFont","text-4xl"),e.textContent=c,r.appendChild(e);const n=document.createElement("div");n.classList.add("flex","gap-4","pt-5","w-full");const d=document.createElement("a");d.href="/profile/update/",d.classList.add("bg-brand-dark","font-mediumFont","text-white","rounded-3xl","py-2","px-5","text-sm","transition","duration-300","ease-out","hover:scale-105"),d.textContent="Edit Profile";const o=document.createElement("a");o.href="/profile/purchases/",o.classList.add("bg-brand-dark","font-mediumFont","text-white","rounded-3xl","py-2","px-5","text-sm","transition","duration-300","ease-out","hover:scale-105"),o.textContent="Purchase History",n.appendChild(d),n.appendChild(o),r.appendChild(n);const l=document.createElement("div");l.classList.add("mt-2","lg:mt-4","pt-3");const p=document.createElement("p");p.textContent="BIO:",p.classList.add("font-smallFont","font-bold","text-lg","text-brand-dark");const u=document.createElement("p");u.textContent=k?.trim()?k:"No bio added yet",u.classList.add("font-smallFont","font-light"),l.appendChild(p),l.appendChild(u),r.appendChild(l);const i=document.createElement("div");i.classList.add("mt-4");const f=document.createElement("p");f.textContent="CREDIT:",f.classList.add("font-smallFont","font-bold","text-lg","text-brand-dark");const g=document.createElement("p");g.textContent=C,g.classList.add("font-smallFont","font-light"),i.appendChild(f),i.appendChild(g),r.appendChild(i);const x=document.createElement("div");x.classList.add("mt-4");const L=document.createElement("p");L.textContent="LISTINGS:",L.classList.add("font-smallFont","font-bold","text-lg","text-brand-dark");const h=document.createElement("p");h.textContent=y,h.classList.add("font-smallFont","font-light"),x.append(L,h),r.appendChild(x),O(t),a.classList.remove("hidden"),H()}R();
//# sourceMappingURL=profile-b7x6gvuD.js.map
