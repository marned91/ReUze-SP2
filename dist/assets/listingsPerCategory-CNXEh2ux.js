import{b as D}from"./listings-BYAVRzMP.js";import{h as b}from"./main-DGQGQn9f.js";import{s as v,h as A}from"./skeletonLoader-U1K08Fq0.js";import"./doFetch-DiDBEFLs.js";function B(d){const s=document.getElementById("status-filter");s&&s.addEventListener("change",a=>{const i=a.target.value;d(i)})}async function E(d="all"){const a=new URLSearchParams(window.location.search).get("tag"),i=document.getElementById("listings-headline");if(a){const e=a.charAt(0).toUpperCase()+a.slice(1);i.textContent=`${e}`}const o=document.getElementById("listings");o.innerHTML="",v();try{const e=await D(a);if(!e||!e.length){const t=document.createElement("p");t.textContent="No available listings for this category, please check again later!",o.appendChild(t);return}S(e,d).forEach(t=>{const n=document.createElement("a");n.href=`/listings/view/index.html?id=${t.id}`,n.classList.add("border","p-4","shadow-2xl","bg-white","flex","flex-col","justify-between","min-h-[300px]","cursor-pointer","transition","duration-300","ease-out","hover:scale-105","rounded-lg");const C=t.media&&t.media.length>0?t.media[0].url:"/assets/default-listing-image.png",c=document.createElement("img");c.src=C,c.alt=t.title,c.classList.add("w-full","h-48","object-cover");const r=document.createElement("h2");r.textContent=t.title,r.classList.add("font-mediumFont","text-xl","font-medium","mt-2");const m=document.createElement("p");m.textContent=t.description.slice(0,100)+"..."||"No description added.",m.classList.add("font-smallFont","italic","text-sm","text-gray-600","mt-2");const L=t.bids.length?Math.max(...t.bids.map(g=>g.amount)):0,u=document.createElement("p");u.textContent=`Current Bid: $${L}`,u.classList.add("text-sm","font-bold","mt-1");const w=new Date(t.endsAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),p=document.createElement("p");p.textContent=`Deadline: ${w}`,p.classList.add("text-sm","mt-2");const l=document.createElement("div");l.classList.add("flex","flex-wrap","gap-1","mt-5","space-x-2"),t.tags&&t.tags.length>0&&t.tags.forEach(g=>{const f=document.createElement("span");f.textContent=g,f.classList.add("rounded-full","bg-brand-dark","text-white","text-xs","px-3","py-1.5"),l.appendChild(f)});const y=new Date,x=new Date(t.endsAt)>y?"active":"expired",h=document.createElement("span");h.textContent=x,h.classList.add("rounded-full","text-white","text-xs","px-3","py-1.5",x==="active"?"bg-accent-dark":"bg-accent-light"),l.appendChild(h),n.appendChild(c),n.appendChild(r),n.appendChild(m),n.appendChild(p),n.appendChild(u),n.appendChild(l),o.appendChild(n)})}catch(e){b("Error fetching listings:",e,"error")}finally{A()}}function S(d,s){const a=new Date;return d.filter(i=>{const e=new Date(i.endsAt)>a?"active":"expired";return s==="all"?!0:s===e})}B(E);E();
//# sourceMappingURL=listingsPerCategory-CNXEh2ux.js.map
